!function(t,e,r){var i=(r.un,r.uns,r["static"],r["class"]),a=r.getset,n=(r.__newvec,laya.webgl.canvas.BlendMode),l=(laya.utils.Browser,laya.utils.Color),s=laya.filters.ColorFilterAction,u=laya.filters.webgl.ColorFilterActionGL,o=laya.filters.Filter,c=laya.filters.webgl.FilterActionGL,h=laya.maths.Matrix,d=(laya.maths.Rectangle,laya.renders.Render),f=(laya.renders.RenderContext,laya.webgl.resource.RenderTarget2D),_=laya.utils.RunDriver,g=(laya.webgl.shader.d2.ShaderDefines2D,laya.display.Sprite,laya.webgl.submit.SubmitCMD),y=laya.resource.Texture,p=laya.webgl.shader.d2.value.Value2D,b=function(){function t(){this.data=null}i(t,"laya.filters.FilterAction");var e=t.prototype;return r.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){return null},t}(),w=function(){function t(){}return i(t,"laya.filters.WebGLFilter"),t.enable=function(){t.isInit||(t.isInit=!0,d.isWebGL&&(_.createFilterAction=function(t){var e;switch(t){case 32:e=new u;break;case 16:e=new v;break;case 8:e=new x}return e}))},t.isInit=!1,t.__init$=function(){_.createFilterAction=function(t){var e;switch(t){case 16:e=new b;break;case 8:e=new b;break;case 32:e=new s}return e}},t}(),v=(function(t){function e(t){this.strength=NaN,e.__super.call(this),void 0===t&&(t=4),d.isWebGL&&w.enable(),this.strength=t,this._action=_.createFilterAction(16),this._action.data=this}i(e,"laya.filters.BlurFilter",t);var r=e.prototype;return a(0,r,"action",function(){return this._action}),a(0,r,"type",function(){return 16}),e}(o),function(t){function e(t,r,i,a){this._color=null,e.__super.call(this),this._elements=new Float32Array(9),void 0===r&&(r=4),void 0===i&&(i=6),void 0===a&&(a=6),d.isWebGL&&w.enable(),this._color=new l(t),this.blur=r,this.offX=i,this.offY=a,this._action=_.createFilterAction(8),this._action.data=this}i(e,"laya.filters.GlowFilter",t);var r=e.prototype;return r.getColor=function(){return this._color._color},a(0,r,"type",function(){return 8}),a(0,r,"action",function(){return this._action}),a(0,r,"offX",function(){return this._elements[5]},function(t){this._elements[5]=t}),a(0,r,"offY",function(){return this._elements[6]},function(t){this._elements[6]=t}),a(0,r,"blur",function(){return this._elements[4]},function(t){this._elements[4]=t}),e}(o),function(t){function e(){this.data,e.__super.call(this)}i(e,"laya.filters.webgl.BlurFilterActionGL",t);var r=e.prototype;return r.setValueMix=function(t){t.defines.add(this.data.type)},r.apply3d=function(t,e,r,i,a){var n=t.getValue("bounds"),l=p.create(1,0);l.setFilters([this.data]);var s=h.EMPTY;s.identity(),r.ctx.drawTarget(t,0,0,n.width,n.height,h.EMPTY,"src",l),l.setFilters(null)},r.setValue=function(t){t.strength=this.data.strength},a(0,r,"typeMix",function(){return 16}),e}(c)),x=function(t){function e(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,e.__super.call(this)}i(e,"laya.filters.webgl.GlowFilterActionGL",t);var l=e.prototype;return r.imps(l,{"laya.filters.IFilterActionGL":!0}),l.setValueMix=function(t){},l.apply3d=function(t,r,i,a,l){var s=t.getValue("bounds");t.addValue("color",this.data.getColor());var u=s.width,o=s.height;this._textureWidth=u,this._textureHeight=o;var c=g.create([t,r,i,0,0],e.tmpTarget);i.ctx.addRenderObject(c);var d,f=h.TEMP;return f.identity(),d=p.create(1,0),d.setFilters([this.data]),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,f,"src",d,null,n.TOINT.overlay),c=g.create([t,r,i,0,0],e.startOut),i.ctx.addRenderObject(c),d=p.create(1,0),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,f,"tmpTarget",d,y.INV_UV,n.TOINT.overlay),d=p.create(1,0),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,f,"src",d),c=g.create([t,r,i,0,0],e.recycleTarget),i.ctx.addRenderObject(c),null},l.setSpriteWH=function(t){this._textureWidth=t.width,this._textureHeight=t.height},l.setValue=function(t){t.u_offsetX=this.data.offX,t.u_offsetY=-this.data.offY,t.u_strength=1,t.u_blurX=this.data.blur,t.u_blurY=this.data.blur,t.u_textW=this._textureWidth,t.u_textH=this._textureHeight,t.u_color=this.data.getColor()},a(0,l,"typeMix",function(){return 8}),e.tmpTarget=function(t,e,r,i,a){var n=t.getValue("bounds"),l=t.getValue("out");l.end();var s=f.create(n.width,n.height);s.start();var u=t.getValue("color");u&&s.clear(u[0],u[1],u[2],0),t.addValue("tmpTarget",s)},e.startOut=function(t,e,r,i,a){var n=t.getValue("tmpTarget");n.end();var l=t.getValue("out");l.start();var s=t.getValue("color");s&&l.clear(s[0],s[1],s[2],0)},e.recycleTarget=function(t,e,r,i,a){var n=(t.getValue("src"),t.getValue("tmpTarget"));n.recycle()},e}(c);r.__init([w])}(window,document,Laya);